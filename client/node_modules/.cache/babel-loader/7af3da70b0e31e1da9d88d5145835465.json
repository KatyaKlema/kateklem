{"ast":null,"code":"var _jsxFileName = \"/Users/ekaterina/Desktop/latoken/03.08.2020/operations-platform/client/src/components/controls/controls.js\";\nimport React from \"react\";\nimport \"./controls.scss\";\nimport { extend } from \"../../utils\";\n\nconst Controls = ({\n  addRow,\n  deleteRow,\n  updateRows,\n  tableName,\n  emptyRow,\n  tableData,\n  selectedRow,\n  getDataToUpdate,\n  cleanDataToUpdate,\n  user\n}) => {\n  const addEmptyRow = (airtableRow, data) => {\n    const rowToAdd = extend(emptyRow, {\n      id: airtableRow.data.id\n    });\n    data.unshift(rowToAdd);\n  };\n\n  const deleteTableRow = () => {\n    const idRow = selectedRow.tabulatorRow.getData().id;\n    const indexToDelete = tableData.findIndex(value => value.id === idRow);\n    tableData.splice(indexToDelete, 1);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"controls\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 9\n    }\n  }, user.rights !== \"Regular\" ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"controls__change-table\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => {\n      addRow(tableName).then(res => {\n        addEmptyRow(res, tableData);\n      });\n    },\n    type: \"button\",\n    className: \"btn controls__add\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 21\n    }\n  }, \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0441\\u0442\\u0440\\u043E\\u0447\\u043A\\u0443\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => {\n      if (selectedRow.airtableId) {\n        deleteRow(tableName, [selectedRow.airtableId]).then(() => deleteTableRow());\n      }\n    },\n    type: \"button\",\n    className: \"btn controls__remove\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 21\n    }\n  }, \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \\u0441\\u0442\\u0440\\u043E\\u0447\\u043A\\u0443\")) : null);\n};\n\nexport default Controls;","map":{"version":3,"sources":["/Users/ekaterina/Desktop/latoken/03.08.2020/operations-platform/client/src/components/controls/controls.js"],"names":["React","extend","Controls","addRow","deleteRow","updateRows","tableName","emptyRow","tableData","selectedRow","getDataToUpdate","cleanDataToUpdate","user","addEmptyRow","airtableRow","data","rowToAdd","id","unshift","deleteTableRow","idRow","tabulatorRow","getData","indexToDelete","findIndex","value","splice","rights","then","res","airtableId"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,iBAAP;AACA,SAASC,MAAT,QAAuB,aAAvB;;AAEA,MAAMC,QAAQ,GAAG,CAAC;AACdC,EAAAA,MADc;AAEdC,EAAAA,SAFc;AAGdC,EAAAA,UAHc;AAIdC,EAAAA,SAJc;AAKdC,EAAAA,QALc;AAMdC,EAAAA,SANc;AAOdC,EAAAA,WAPc;AAQdC,EAAAA,eARc;AASdC,EAAAA,iBATc;AAUdC,EAAAA;AAVc,CAAD,KAWX;AACF,QAAMC,WAAW,GAAG,CAACC,WAAD,EAAcC,IAAd,KAAuB;AACvC,UAAMC,QAAQ,GAAGf,MAAM,CAACM,QAAD,EAAW;AAAEU,MAAAA,EAAE,EAAEH,WAAW,CAACC,IAAZ,CAAiBE;AAAvB,KAAX,CAAvB;AACAF,IAAAA,IAAI,CAACG,OAAL,CAAaF,QAAb;AACH,GAHD;;AAIA,QAAMG,cAAc,GAAG,MAAM;AACzB,UAAMC,KAAK,GAAGX,WAAW,CAACY,YAAZ,CAAyBC,OAAzB,GAAmCL,EAAjD;AACA,UAAMM,aAAa,GAAGf,SAAS,CAACgB,SAAV,CACjBC,KAAD,IAAWA,KAAK,CAACR,EAAN,KAAaG,KADN,CAAtB;AAGAZ,IAAAA,SAAS,CAACkB,MAAV,CAAiBH,aAAjB,EAAgC,CAAhC;AACH,GAND;;AAOA,sBACI;AAAK,IAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKX,IAAI,CAACe,MAAL,KAAgB,SAAhB,gBACG;AAAK,IAAA,SAAS,EAAC,wBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AACI,IAAA,OAAO,EAAE,MAAM;AACXxB,MAAAA,MAAM,CAACG,SAAD,CAAN,CAAkBsB,IAAlB,CAAwBC,GAAD,IAAS;AAC5BhB,QAAAA,WAAW,CAACgB,GAAD,EAAMrB,SAAN,CAAX;AACH,OAFD;AAGH,KALL;AAMI,IAAA,IAAI,EAAC,QANT;AAOI,IAAA,SAAS,EAAC,mBAPd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mGADJ,eAYI;AACI,IAAA,OAAO,EAAE,MAAM;AACX,UAAIC,WAAW,CAACqB,UAAhB,EAA4B;AACxB1B,QAAAA,SAAS,CAACE,SAAD,EAAY,CACjBG,WAAW,CAACqB,UADK,CAAZ,CAAT,CAEGF,IAFH,CAEQ,MAAMT,cAAc,EAF5B;AAGH;AACJ,KAPL;AAQI,IAAA,IAAI,EAAC,QART;AASI,IAAA,SAAS,EAAC,sBATd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6FAZJ,CADH,GA2BG,IA5BR,CADJ;AAgCH,CAvDD;;AAyDA,eAAejB,QAAf","sourcesContent":["import React from \"react\";\nimport \"./controls.scss\";\nimport { extend } from \"../../utils\";\n\nconst Controls = ({\n    addRow,\n    deleteRow,\n    updateRows,\n    tableName,\n    emptyRow,\n    tableData,\n    selectedRow,\n    getDataToUpdate,\n    cleanDataToUpdate,\n    user,\n}) => {\n    const addEmptyRow = (airtableRow, data) => {\n        const rowToAdd = extend(emptyRow, { id: airtableRow.data.id });\n        data.unshift(rowToAdd);\n    };\n    const deleteTableRow = () => {\n        const idRow = selectedRow.tabulatorRow.getData().id;\n        const indexToDelete = tableData.findIndex(\n            (value) => value.id === idRow\n        );\n        tableData.splice(indexToDelete, 1);\n    };\n    return (\n        <div className=\"controls\">\n            {user.rights !== \"Regular\" ? (\n                <div className=\"controls__change-table\">\n                    <button\n                        onClick={() => {\n                            addRow(tableName).then((res) => {\n                                addEmptyRow(res, tableData);\n                            });\n                        }}\n                        type=\"button\"\n                        className=\"btn controls__add\"\n                    >\n                        Добавить строчку\n                    </button>\n                    <button\n                        onClick={() => {\n                            if (selectedRow.airtableId) {\n                                deleteRow(tableName, [\n                                    selectedRow.airtableId,\n                                ]).then(() => deleteTableRow());\n                            }\n                        }}\n                        type=\"button\"\n                        className=\"btn controls__remove\"\n                    >\n                        Удалить строчку\n                    </button>\n                </div>\n            ) : null}\n        </div>\n    );\n};\n\nexport default Controls;\n"]},"metadata":{},"sourceType":"module"}